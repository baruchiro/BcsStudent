---
title: "כספיון: תוכנה חברתית לניהול מעקב אחרי ההוצאות וההכנסות שלנו"
draft: false
date: 2021-07-05
images: /static/images/caspion/main-screenshot.png
summary: |
  איך למשוך בצורה אוטומטית את נתוני העובר ושב מחשבונות הבנק והאשראי, ולנתח אותם בכלים המועדפים עלינו או בכלים מוכרים לניהול הוצאות
tags: ["כספיון", "Google Data Studio", "Open-Source", "כסף", "integrations"]
type: Blog
---

**אנחנו צריכים להכיר את ההכנסות וההוצאות שלנו**.

> האם הוצאנו החודש יותר ממה שהכנסנו?  
> האם המחיר של האינטרנט קפץ פתאום כי נגמרה העסקה?  
> האם הבנק התחיל לקחת עמלות פתאום?  
> מים וחשמל, כמה זה יחסית לפעמים קודמות?  
> כמה הוצאנו על בילויים החודש?

יש הרבה שאלות חשובות שצריך לשים לב אליהן, והרבה פעמים אפשר לראות באתר הבנק פילוח לפי קטגוריות, או אפילו להשתמש בשירותים חיצוניים, כמו [Riseup](https://www.riseup.co.il/), שמנסים ממש לעזור לנו לשלוט בהוצאות שלנו.

אבל הרגשתי שהשירותים האלו אף פעם לא מספיקים לי. באופן כללי, הבנקים אולי מציעים ניתוח נתונים, אבל זה תמיד מוגבל, בדרך כלל אפשר לראות רק שנה אחורה, וזה לא מסונכרן עם חשבונות בנק אחרים וכרטיסי האשראי.

חוץ מזה, הם לא מכירים את ההוצאות שלי כמו שאני מכיר אותן, אני לא יכול להגדיר קטגוריות מותאמות אישית, וקשה לי להגיד להם דברים כמו "בסדר, החודש הוצאתי פי 2 רק כי דחיתי את התשלום של החודש הקודם".

ובסוף אני תמיד תלוי בהם, באפליקציות הבנק או באפליקציות החיצוניות. הנתונים אף פעם לא בשליטתי.

כבר הרבה זמן שאנחנו עובדים על תוכנה שתעזור לנו להפוך את התהליך לפשוט ואוטומטי, והנה הצעה לשרשרת פשוטה של כלים שתעזור לכם לנתח את הנתונים לפי הקריטריונים שמעניינים אתכם.

## הגישה

אוקיי, אז שאלנו את השאלות בתחילת הפוסט, ואנחנו רוצים לענות עליהם, כל חודש, נניח.

הבעיה היא שככל שנידרש לעשות יותר פעולות, כך זה יהיה יותר מעמסה, ויידחה. לכן המטרה היא להפוך את התהליך לאוטומטי כמה שיותר, כדי ש**התשובות** לשאלות יהיו זמינות כמה שיותר בקלות, ונוכל פשוט לפתוח עליהן עין ולראות שלא קרה משהו חריג.

## קבלת הנתונים

אז הנתונים נמצאים באתר הבנק והאשראי, ואנחנו רוצים להוציא אותם לתוכנת ניהול נתונים, גליון אלקטרוני (Excel) למשל. ככל הידוע לי, רוב הבנקים מאפשרים לייצא את הנתונים בפורמט Excel, אבל עדיין, לכל בנק יש פורמט שונה, ואם רוצים לנתח נתונים של תקופה ארוכה, צריך לאחד אותם עם הנתונים הקודמים ולבטל את הכפילויות.

וכמו שאמרנו, ככל שעושים יותר פעולות ידניות, התהליך הופך למסורבל יותר, ולא מתבצע בסופו של דבר.

> בשביל לפתור את הבעיה הזאת, פיתחנו את תוכנת [_כספיון_](https://brafdlog.github.io/caspion/)

אחרי שהורדתם את התוכנה, תצטרכו להכניס בצד אחד את פרטי הכניסה לחשבונות הבנק והאשראי שלכם, ובצד השני תצטרכו לבחור לאיפה לייצא את הנתונים.

במדריך הזה אני ממליץ להשתמש בייצוא ל**Google Sheets**, שיושב בחשבון הGoogle Drive שלכם באינטרנט ומאפשר להתממשק עם כלי ניתוח מתקדמים.

> **חשוב מאוד!** הסיסמאות מוצפנות ונשמרות במחשב. משיכת הנתונים מתבצעת בדיוק כמו שאתם מבצעים אותה ידנית, על ידי פתיחה של הדפדפן בצורה אוטומטית וגלישה למסך הנתונים.
> עם זאת, נתינת הסיסמאות לתוכנה שהיא לא אתר הבנק כרוכה בסיכון מסוים, והיא על אחריות המשתמש.

![import-export](/static/images/caspion/import-export.png)

כמובן, ללחוץ על כפתור _Run_.

לאחר הריצה, תוכלו לראות שהנתונים נמצאים בגליון שהתוכנה יצרה בחשבון ה[Google Drive](http://sheets.google.com/) שלכם.

![google-sheets](/static/images/caspion/google-sheets.png)

## הצגת הנתונים

בהתאם לגישה של הורדת פעולות ידניות ודברים אחרים מסובכים, אני חושב שעבור רוב השאלות, ניתן לבנות גרף מתאים שיראה לנו את התשובה במבט אחד.

אחרי נסיונות אני חושב שמצאתי ש[**Google Data Studio**](https://datastudio.google.com/overview) הוא הפתרון שהכי מתאים למקרה, כי הוא מאפשר מאוד בקלות להתחבר לנתונים בגליון של Google Sheets ולהציג אותם בצורות שונות וטווחי זמן שונים.

![google-data-studio](/static/images/caspion/google-data-studio.png)

העבודה עם _Google Data Studio_ דורשת התאמה, וככל שלומדים יותר על התוכנה ניתן להוציא ממנה יותר. אם זה מרגיש לכם מורכב מידי, תמיד אפשר להשתמש ב*כספיון* כדי לייצא לתוכנת [YNAB](https://www.youneedabudget.com/) שתנתח את הנתונים עבורכם.

### יצירת עותק מהTemplate

יצרתי Template בסיסי עם נתונים מומצאים מ*כספיון*. אפשר להגיע אל הTemplate מהקישור [הזה](https://datastudio.google.com/u/0/reporting/fd383078-4d62-429d-b7da-998d299f1c65/preview) וללחוץ על כפתור _USE TEMPLATE_.

תצוגות ב*Google Data Studio* מתבססות על נתונים ממקורות חיצוניים. מכיוון שהTemplate מבוסס על נתונים מזויפים שלא משותפים איתכם, תצטרכו ליצור קישור חדש לגליון שנוצר על ידי _כספיון_.

![create new data source](/static/images/caspion/create-new-data-source.png)

במסך שנפתח, ניתן לראות אפשרויות רבות לייבוא נתונים. אנחנו נבחר כמובן ב*Google Sheets*.

תופיע לנו רשימה של הגליונות האחרונים שנגענו בהם, ונבחר את הגליון שנוצר על ידי _כספיון_.

![select sheet](/static/images/caspion/select-sheet.png)

לחיצה בצד ימין למעלה על _CONNECT_.

אפשר לראות ש*GDS* זיהה את העמודות שיש לנו, ואת סוג הנתונים שבהם. כעת אפשר ללחוץ שוב בצד ימין למעלה על _ADD TO REPORT_.

## סיכום

סיימנו עם ויזואליזציה מאוד פשוטה של הנתונים, ומכאן אפשר רק להתקדם. אנחנו משתמשים בכלים מאוד פשוטים וחזקים לניתוח נתונים, כך שיחד עם היכולות של הגליון האלקטרוני לבצע התאמות וחישובים לכמויות של נתונים, ועם היכולת של Google Data Studio להציג אותם בצורה מקצועית, אפשר לעשות כל מסך שראיתם בתוכנה מקצועית, וגם דברים שלא תמיד זמינים בתוכנות ששילמתם עליהם.

אישית, יצרתי לעצמי גרפים של חיובים קבועים ועמלות, כדי לראות שאין חיוב שפתאום חרג מהשגרה.

נכון, כדי ליצור את התהליך הזה נדרשת קצת עבודה, אבל מי שמנסח לעצמו שאלות ספציפיות כמו שניסחתי בהתחלה, הרבה פעמים ימצא את עצמו משתמש בכלים מותאמים אישית כדי לענות על השאלות הספציפיות שמעניינות אותו.

> **בהצלחה!** ניתן לפנות אלינו לכל שאלה שיש.

[יהונתן גולדפרב](), [ברוך אודם](mailto:baruchiro@gmail.com)

---

### הערות וקישורים רלוונטיים

- הפרויקט שלנו מבוסס על [פרויקט ישראלי אחר](https://github.com/eshaham/israeli-bank-scrapers) שאחראי על ייצוא המידע מהבנקים.
- יש [פרויקט ישראלי נוסף](https://github.com/raziele/creditCardAnalysis) שמנתח קבצי נתונים מהבנקים, ומציג גרפים בתוך הגליון. אני מקווה שהוא [יתמוך בנו בקרוב](https://github.com/raziele/creditCardAnalysis/issues/10).
- דיוני אבטחת מידע אפשר למצוא [כאן](https://github.com/brafdlog/caspion/issues?q=is%3Aopen+is%3Aissue+label%3Asecurity) ו[כאן](https://github.com/eshaham/israeli-bank-scrapers/issues/588).
- לגבי קטגוריות לנתונים: כרגע התמיכה מאוד בסיסית, ואנחנו עוד צריכים לעבוד על זה. בינתיים אני עשיתי מיפוי ידני בGoogle Sheets משם העסק לקטגוריה שלו.
- השימוש בGoogle Data Studio עדיף על שימוש פשוט בGoogle Sheets, כי ברגע שאתה מנסה לפעול על מאגר של נתונים, ולא רק על שורה אחת, אתה מתחיל להסתבך עם שאילתת Query שאתה צריך לערוך אותה בתוך תא ודברים כאלה.
